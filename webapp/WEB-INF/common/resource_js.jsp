<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<!-- jQuery -->
<script src="${pageContext.request.contextPath}/vendors/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="${pageContext.request.contextPath}/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="${pageContext.request.contextPath}/vendors/fastclick/lib/fastclick.js"></script>
<!-- NProgress -->
<script src="${pageContext.request.contextPath}/vendors/nprogress/nprogress.js"></script>
<!-- Chart.js -->
<script src="${pageContext.request.contextPath}/vendors/Chart.js/dist/Chart.min.js"></script>
<!-- gauge.js -->
<script src="${pageContext.request.contextPath}/vendors/gauge.js/dist/gauge.min.js"></script>
<!-- bootstrap-progressbar -->
<script src="${pageContext.request.contextPath}/vendors/bootstrap-progressbar/bootstrap-progressbar.min.js"></script>
<!-- iCheck -->
<script src="${pageContext.request.contextPath}/vendors/iCheck/icheck.min.js"></script>
<!-- Skycons -->
<script src="${pageContext.request.contextPath}/vendors/skycons/skycons.js"></script>
<!-- Flot -->
<script src="${pageContext.request.contextPath}/vendors/Flot/jquery.flot.js"></script>
<script src="${pageContext.request.contextPath}/vendors/Flot/jquery.flot.pie.js"></script>
<script src="${pageContext.request.contextPath}/vendors/Flot/jquery.flot.time.js"></script>
<script src="${pageContext.request.contextPath}/vendors/Flot/jquery.flot.stack.js"></script>
<script src="${pageContext.request.contextPath}/vendors/Flot/jquery.flot.resize.js"></script>
<!-- Flot plugins -->
<script src="${pageContext.request.contextPath}/vendors/flot.orderbars/js/jquery.flot.orderBars.js"></script>
<script src="${pageContext.request.contextPath}/vendors/flot-spline/js/jquery.flot.spline.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/flot.curvedlines/curvedLines.js"></script>
<!-- DateJS -->
<script src="${pageContext.request.contextPath}/vendors/DateJS/build/date.js"></script>
<!-- JQVMap -->
<script src="${pageContext.request.contextPath}/vendors/jqvmap/dist/jquery.vmap.js"></script>
<script src="${pageContext.request.contextPath}/vendors/jqvmap/dist/maps/jquery.vmap.world.js"></script>
<script src="${pageContext.request.contextPath}/vendors/jqvmap/examples/js/jquery.vmap.sampledata.js"></script>
<!-- PNotify -->
<script src="${pageContext.request.contextPath}/vendors/pnotify/dist/pnotify.js"></script>
<script src="${pageContext.request.contextPath}/vendors/pnotify/dist/pnotify.buttons.js"></script>
<script src="${pageContext.request.contextPath}/vendors/pnotify/dist/pnotify.nonblock.js"></script>
<!-- bootstrap-wysiwyg -->
<script src="${pageContext.request.contextPath}/vendors/bootstrap-wysiwyg/js/bootstrap-wysiwyg.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/jquery.hotkeys/jquery.hotkeys.js"></script>
<script src="${pageContext.request.contextPath}/vendors/google-code-prettify/src/prettify.js"></script>
<!-- jQuery Tags Input -->
<script src="${pageContext.request.contextPath}/vendors/jquery.tagsinput/src/jquery.tagsinput.js"></script>
<!-- Switchery -->
<script src="${pageContext.request.contextPath}/vendors/switchery/dist/switchery.min.js"></script>
<!-- Select2 -->
<script src="${pageContext.request.contextPath}/vendors/select2/dist/js/select2.full.min.js"></script>
<!-- Parsley -->
<script src="${pageContext.request.contextPath}/vendors/parsleyjs/dist/parsley.min.js"></script>
<!-- Autosize -->
<script src="${pageContext.request.contextPath}/vendors/autosize/dist/autosize.min.js"></script>
<!-- jQuery autocomplete -->
<script src="${pageContext.request.contextPath}/vendors/devbridge-autocomplete/dist/jquery.autocomplete.min.js"></script>
<!-- starrr -->
<script src="${pageContext.request.contextPath}/vendors/starrr/dist/starrr.js"></script>
<!-- Datatables -->
<script src="${pageContext.request.contextPath}/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<!-- bootstrap-daterangepicker -->
<script src="${pageContext.request.contextPath}/vendors/moment/min/moment.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/moment/locale/zh-cn.1.0.js"></script>
<script src="${pageContext.request.contextPath}/vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
<%-- <script src="${pageContext.request.contextPath}/vendors/datatables.net-bs/js/dataTables.bootstrap-1.0.min.js"></script> --%>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-bs/js/dataTables.bootstrap-1.0.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-bs/js/fnReloadAjax.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
<script src="${pageContext.request.contextPath}/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/jszip/dist/jszip.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/pdfmake/build/pdfmake.min.js"></script>
<script src="${pageContext.request.contextPath}/vendors/pdfmake/build/vfs_fonts.js"></script>
<!-- jquery.inputmask -->
<script src="${pageContext.request.contextPath}/vendors/jquery.inputmask/dist/min/jquery.inputmask.bundle.min.js"></script>
<!-- bootstrap-treeview -->
<script src="${pageContext.request.contextPath}/vendors/bootstrap-treeview/dist/bootstrap-treeview.min.js"></script>
<!-- jquery-confirm -->
<script src="${pageContext.request.contextPath}/vendors/jquery.confirm/jquery.confirm.min.js"></script>
<!-- jQuery Smart Wizard -->
<script src="${pageContext.request.contextPath}/vendors/jQuery-Smart-Wizard/js/jquery.smartWizard.js"></script>
<!-- Custom Theme Scripts -->
<script src="${pageContext.request.contextPath}/build/js/custom.min.js"></script>
<!-- Boss Theme Scripts -->
<script src="${pageContext.request.contextPath}/build/js/boss.js"></script>
<!-- jQuery Sparklines -->
<script src="${pageContext.request.contextPath}/vendors/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
<!-- easy-pie-chart -->
<script src="${pageContext.request.contextPath}/vendors/jquery.easy-pie-chart/dist/jquery.easypiechart.min.js"></script>
<!-- tableExport.jquery.plugin -->
<script src="${pageContext.request.contextPath}/vendors/tableExport/tableExport.min.js"></script>
<!-- dwr -->
<script src="${pageContext.request.contextPath}/dwr/engine.js"></script>
<script src="${pageContext.request.contextPath}/dwr/util.js"></script>
<script src="${pageContext.request.contextPath}/dwr/interface/messagePushDwr.js"></script>

<script type="text/javascript">
	$(function() {
		onPageLoad();
		initFlushOrderNum();
	})
	
	// 注入设定的 attribute
	function onPageLoad() {
		var userId = '${user.permission.id}';
		messagePushDwr.onPageLoad(userId);
	}
	
	// 全局dwr消息推送方法
	function sendMessageAuto(autoMessage) {
		fnPNotify('提醒', 'success', autoMessage, 15000, 'green');
	}
	
	// 全局dwr消息推送方法
	function flushOrderNum(content) {
		fnFlushOrderNum(content);
	}
	//初始化订单状态
	function initFlushOrderNum() {
		fnGetStatus("${pageContext.request.contextPath}/mfq/order/getStatus.do");
	}
	
	// dwr 异常
 	function errh(errorString, exception) {
 		console.log(exception);
		$.confirm({
			title : "错误",
			text : "操作异常，请刷新重试！",
			confirmButton : '确认',
			cancelButton : false
		});
	}
	
	// dwr 警告
	function warn(errorString, exception) {
		$.confirm({
			title : "警告",
			text : "此操作提可能引起异常，确认执行此操作吗？",
			confirmButton : '确认',
			cancelButton : '取消'
		});
	}
	
	// 全局-异常
	dwr.engine.setErrorHandler(errh);
	// 全局-警告
	dwr.engine.setWarningHandler(warn)
	// 全局-超时时间
//	dwr.engine.setTimeout(10000);
	// 全局-异步/同步
	// dwr.engine.setAsync(true);
	// 全局-开启关闭页面提醒服务功能
	dwr.engine.setNotifyServerOnPageUnload(true);
	// onload 事件中添加调用,用来开始 Comet/Polling 周期，开启逆向 Ajax 功能
	dwr.engine.setActiveReverseAjax(true);

</script>



